<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Roast â€” Your CLAUDE.md, Brutally Honest</title>
<meta name="description" content="Paste your CLAUDE.md and get roasted. Comedy meets code review.">
<meta property="og:title" content="CC Roast â€” Your CLAUDE.md, Brutally Honest">
<meta property="og:description" content="How overengineered is your AI setup? Find out the hard way.">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0f0f0f;
  --surface: #1a1a1a;
  --surface-2: #242424;
  --fire: #ff4500;
  --fire-glow: rgba(255, 69, 0, 0.15);
  --gold: #ffd700;
  --ice: #00d4ff;
  --text: #e8e8e8;
  --text-dim: #888;
  --text-faint: #555;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  min-height: 100vh;
}

.container {
  max-width: 680px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

/* Header */
header {
  text-align: center;
  padding: 3rem 0 2rem;
}

header h1 {
  font-size: 2.5rem;
  font-weight: 900;
  margin-bottom: 0.3rem;
}

header h1 .fire { color: var(--fire); }

header .tagline {
  color: var(--text-dim);
  font-size: 1.05rem;
}

/* Input area */
.input-section {
  margin-top: 2rem;
}

.input-section label {
  display: block;
  color: var(--text-dim);
  font-size: 0.85rem;
  margin-bottom: 0.5rem;
}

.input-section textarea {
  width: 100%;
  height: 220px;
  background: var(--surface);
  border: 2px solid var(--surface-2);
  border-radius: 12px;
  color: var(--text);
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 0.8rem;
  padding: 1rem;
  resize: vertical;
  transition: border-color 0.2s;
}

.input-section textarea:focus {
  outline: none;
  border-color: var(--fire);
}

.input-section textarea::placeholder {
  color: var(--text-faint);
}

.btn-roast {
  display: block;
  width: 100%;
  margin-top: 1rem;
  padding: 1rem;
  background: var(--fire);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s;
  letter-spacing: 0.5px;
}

.btn-roast:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(255, 69, 0, 0.3);
}

.btn-roast:active { transform: translateY(0); }

.demo-link {
  display: block;
  text-align: center;
  margin-top: 0.8rem;
  color: var(--text-faint);
  font-size: 0.8rem;
  cursor: pointer;
  text-decoration: underline;
  text-underline-offset: 3px;
}

.demo-link:hover { color: var(--ice); }

/* Results */
#results {
  display: none;
  margin-top: 2rem;
}

/* Verdict banner */
.verdict-banner {
  text-align: center;
  padding: 2rem;
  border-radius: 16px;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;
}

.verdict-banner::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--fire-glow), transparent 60%);
  pointer-events: none;
}

.verdict-banner .verdict-icon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.verdict-banner .verdict-title {
  font-size: 1.8rem;
  font-weight: 900;
  margin-bottom: 0.3rem;
}

.verdict-banner .verdict-subtitle {
  color: var(--text-dim);
  font-size: 0.95rem;
}

/* Score meters */
.scores-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 2rem;
}

.score-card {
  background: var(--surface);
  border-radius: 12px;
  padding: 1.2rem;
  position: relative;
  overflow: hidden;
}

.score-card .sc-icon { font-size: 1.3rem; margin-bottom: 0.3rem; }
.score-card .sc-label { font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
.score-card .sc-value { font-size: 1.8rem; font-weight: 800; margin: 0.3rem 0; }
.score-card .sc-bar { height: 4px; background: var(--surface-2); border-radius: 2px; margin-top: 0.5rem; }
.score-card .sc-fill { height: 100%; border-radius: 2px; transition: width 1s ease; }

/* Roast list */
.roast-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

.roast-item {
  background: var(--surface);
  border-radius: 12px;
  padding: 1.2rem;
  border-left: 3px solid var(--fire);
  position: relative;
}

.roast-item.compliment {
  border-left-color: var(--gold);
}

.roast-item .ri-category {
  font-size: 0.7rem;
  color: var(--text-faint);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.3rem;
}

.roast-item .ri-text {
  font-size: 0.95rem;
  line-height: 1.6;
}

.roast-item .ri-text strong {
  color: var(--fire);
}

.roast-item.compliment .ri-text strong {
  color: var(--gold);
}

/* Share section */
.share-section {
  text-align: center;
  padding: 1.5rem;
  background: var(--surface);
  border-radius: 12px;
  margin-bottom: 2rem;
}

.share-section .share-text {
  font-size: 0.85rem;
  color: var(--text-dim);
  margin-bottom: 1rem;
}

.share-btns {
  display: flex;
  gap: 0.6rem;
  justify-content: center;
  flex-wrap: wrap;
}

.share-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.55rem 1.1rem;
  border-radius: 50px;
  border: none;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s;
}

.share-btn:hover { transform: translateY(-1px); }
.share-btn.twitter { background: #1d9bf0; color: white; }
.share-btn.copy { background: var(--surface-2); color: var(--text); }
.share-btn.again { background: transparent; color: var(--text-dim); border: 1px solid var(--surface-2); }

/* Footer */
.footer {
  text-align: center;
  padding: 2rem 0;
  color: var(--text-faint);
  font-size: 0.75rem;
}

.footer a { color: var(--fire); text-decoration: none; }
.footer a:hover { text-decoration: underline; }

/* Stats bar */
.quick-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.qs-item {
  text-align: center;
}

.qs-item .qs-val {
  font-size: 1.5rem;
  font-weight: 800;
  font-family: 'SF Mono', monospace;
}

.qs-item .qs-lbl {
  font-size: 0.7rem;
  color: var(--text-faint);
  text-transform: uppercase;
  letter-spacing: 1px;
}

@media (max-width: 500px) {
  .scores-grid { grid-template-columns: 1fr; }
  header h1 { font-size: 2rem; }
  .quick-stats { gap: 1.2rem; }
}

.lang-toggle {
  margin-top: 0.8rem;
  background: var(--surface-2);
  border: 1px solid var(--fire);
  color: var(--fire);
  padding: 0.3rem 0.8rem;
  border-radius: 4px;
  font-size: 0.8rem;
  cursor: pointer;
  letter-spacing: 0.5px;
}
.lang-toggle:hover { background: var(--fire-glow); }
</style>
</head>
<body>
<div class="container">

<header>
  <h1>CC <span class="fire">Roast</span></h1>
  <p class="tagline" id="tagline">Your CLAUDE.md, brutally honest.</p>
  <button class="lang-toggle" onclick="toggleLang()" id="lang-btn">æ—¥æœ¬èª</button>
</header>

<div class="input-section" id="input-section">
  <label id="input-label">Paste your CLAUDE.md contents:</label>
  <textarea id="claude-md" placeholder="# My Claude Code Instructions&#10;&#10;## Rules&#10;- NEVER do this&#10;- ALWAYS do that&#10;- DO NOT even think about it&#10;..."></textarea>
  <button class="btn-roast" onclick="roastIt()" id="roast-btn">Roast My Config</button>
  <span class="demo-link" onclick="loadDemo()" id="demo-link">Try with a demo CLAUDE.md</span>
</div>

<div id="results">
  <div class="verdict-banner" id="verdict-banner">
    <div class="verdict-icon" id="verdict-icon"></div>
    <div class="verdict-title" id="verdict-title"></div>
    <div class="verdict-subtitle" id="verdict-subtitle"></div>
  </div>

  <div class="quick-stats" id="quick-stats"></div>
  <div class="scores-grid" id="scores-grid"></div>
  <div class="roast-list" id="roast-list"></div>

  <div class="share-section">
    <div class="share-text" id="share-text">Dare your friends to get roasted too</div>
    <div class="share-btns">
      <button class="share-btn twitter" onclick="shareTwitter()" id="share-twitter-btn">Share on X</button>
      <button class="share-btn copy" onclick="copyResult()" id="copy-btn">Copy Result</button>
      <button class="share-btn again" onclick="tryAgain()" id="again-btn">Roast Again</button>
    </div>
  </div>
</div>

<div class="footer">
  Part of <a href="https://yurukusa.github.io/">cc-toolkit</a> &mdash;
  <a href="https://yurukusa.github.io/cc-health-check/">Health Check</a> &middot;
  <a href="https://github.com/yurukusa/cc-session-stats">Session Stats</a> &middot;
  <a href="https://github.com/yurukusa/cc-audit-log">Audit Log</a> &middot;
  <a href="https://yurukusa.github.io/cc-cost-check/">Cost Check</a> &middot;
  <a href="https://yurukusa.github.io/cc-wrapped/">Wrapped</a>
</div>

</div>

<script>
const DEMO_MD = `# Claude Code Instructions

## Core Rules
- NEVER modify files without reading them first
- ALWAYS run tests before committing
- DO NOT push to main without approval
- NEVER use rm -rf
- DO NOT skip pre-commit hooks
- ALWAYS use TypeScript strict mode

## Code Style
- Use functional programming patterns
- Prefer immutable data structures
- NEVER use \`any\` type
- DO NOT use console.log in production code
- ALWAYS add JSDoc comments to public functions
- Keep functions under 20 lines
- NEVER nest more than 3 levels deep

## Git Rules
- Commit messages must follow Conventional Commits
- NEVER force push
- ALWAYS create a branch for changes
- DO NOT commit .env files

## Communication
- Be concise in responses
- ALWAYS explain your reasoning
- When unsure, ask before proceeding
- Provide alternatives when suggesting changes

## Testing
- Write tests for all new functions
- Maintain >80% code coverage
- NEVER skip failing tests
- Use descriptive test names

## Security
- NEVER hardcode secrets
- ALWAYS validate user input
- Use parameterized queries for SQL
- Check dependencies for vulnerabilities`;

// Analysis engine
function analyze(md) {
  const lines = md.split('\n');
  const text = md;
  const words = text.split(/\s+/).filter(w => w.length > 0);
  const lineCount = lines.length;
  const wordCount = words.length;
  const charCount = text.length;

  // Strictness analysis (English)
  const nevers = (text.match(/\bNEVER\b/gi) || []).length;
  const donts = (text.match(/\bDO NOT\b/gi) || []).length;
  const always = (text.match(/\bALWAYS\b/gi) || []).length;
  const musts = (text.match(/\bMUST\b/gi) || []).length;
  const shoulds = (text.match(/\bSHOULD\b/gi) || []).length;
  const importants = (text.match(/\bIMPORTANT\b/gi) || []).length;
  const criticals = (text.match(/\bCRITICAL\b/gi) || []).length;

  // Strictness analysis (Japanese â€” ç¦æ­¢/ã™ã‚‹ãª/çµ¶å¯¾/å¿…ãš/å³å‘½/ä¸å¯)
  const jpForbidden = (text.match(/ç¦æ­¢/g) || []).length;
  const jpDontDo = (text.match(/ã™ã‚‹ãª|ã—ã¦ã¯ã„ã‘ãªã„|ã™ã‚‹ã¹ã‹ã‚‰ãš/g) || []).length;
  const jpAbsolute = (text.match(/çµ¶å¯¾/g) || []).length;
  const jpMust = (text.match(/å¿…ãš/g) || []).length;
  const jpStrictOrder = (text.match(/å³å‘½/g) || []).length;
  const jpNotAllowed = (text.match(/ä¸å¯(?!èƒ½)/g) || []).length;
  const jpStrict = jpForbidden + jpDontDo + jpAbsolute + jpMust + jpStrictOrder + jpNotAllowed;

  const strictTotal = nevers + donts + always + musts + importants + criticals + jpStrict;

  // Sections
  const h2s = (text.match(/^## /gm) || []).length;
  const h3s = (text.match(/^### /gm) || []).length;
  const headers = h2s + h3s;

  // Hooks/tools
  const hookMentions = (text.match(/\bhook/gi) || []).length;
  const mcpMentions = (text.match(/\bMCP\b/gi) || []).length;
  const toolMentions = (text.match(/\btool/gi) || []).length;

  // Code blocks
  const codeBlocks = (text.match(/```/g) || []).length / 2;

  // Emoji usage
  const emojis = (text.match(/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu) || []).length;

  // Tables
  const tables = (text.match(/\|.*\|.*\|/g) || []).length;

  // Git safety
  const hasGitSafety = /git.*safe|force.?push|rm -rf|reset.*hard|backup/i.test(text);

  // Test mentions
  const testMentions = (text.match(/\btest/gi) || []).length;

  // Security mentions
  const securityMentions = (text.match(/\bsecur|secret|token|credential|api.?key|\.env\b/gi) || []).length;

  // Contradictions check
  const saysConcise = /\bconcise\b/i.test(text);
  const isVerbose = wordCount > 500;

  // Bullet points
  const bullets = (text.match(/^[\s]*[-*]\s/gm) || []).length;

  // TODO/FIXME
  const todos = (text.match(/\bTODO\b|\bFIXME\b|\bHACK\b/gi) || []).length;

  return {
    lineCount, wordCount, charCount,
    nevers, donts, always, musts, shoulds, importants, criticals, jpStrict, strictTotal,
    h2s, h3s, headers,
    hookMentions, mcpMentions, toolMentions,
    codeBlocks, emojis, tables, bullets,
    hasGitSafety, testMentions, securityMentions,
    saysConcise, isVerbose, todos
  };
}

// Score calculators (0-100)
function verbosityScore(a) {
  if (a.lineCount < 20) return 10;
  if (a.lineCount < 50) return 25;
  if (a.lineCount < 100) return 40;
  if (a.lineCount < 200) return 55;
  if (a.lineCount < 500) return 75;
  if (a.lineCount < 1000) return 90;
  return 100;
}

function strictnessScore(a) {
  const density = a.strictTotal / Math.max(a.wordCount, 1) * 1000;
  if (density < 2) return 10;
  if (density < 5) return 25;
  if (density < 10) return 40;
  if (density < 20) return 60;
  if (density < 40) return 80;
  return 100;
}

function complexityScore(a) {
  let score = 0;
  score += Math.min(a.headers * 5, 30);
  score += Math.min(a.codeBlocks * 8, 25);
  score += Math.min(a.tables * 10, 20);
  score += a.hookMentions > 3 ? 15 : a.hookMentions * 4;
  score += a.mcpMentions > 0 ? 10 : 0;
  return Math.min(score, 100);
}

function thoroughnessScore(a) {
  let score = 0;
  if (a.hasGitSafety) score += 20;
  if (a.testMentions > 0) score += 20;
  if (a.securityMentions > 0) score += 20;
  if (a.codeBlocks > 0) score += 15;
  if (a.headers >= 3) score += 15;
  if (a.wordCount >= 100) score += 10;
  return Math.min(score, 100);
}

// Roast generation
function generateRoasts(a) {
  const roasts = [];

  // Verbosity roasts
  if (a.lineCount > 800) {
    roasts.push({ cat: 'Verbosity', text: '<strong>' + a.lineCount + ' lines.</strong> Your AI reads a novel before writing Hello World. This is a CLAUDE.md, not a PhD thesis.', type: 'roast' });
  } else if (a.lineCount > 400) {
    roasts.push({ cat: 'Verbosity', text: '<strong>' + a.lineCount + ' lines.</strong> Your CLAUDE.md is longer than most README files. Your AI is spending serious context window just reading your rules.', type: 'roast' });
  } else if (a.lineCount > 200) {
    roasts.push({ cat: 'Verbosity', text: a.lineCount + ' lines. That\'s... a lot of opinions about how an AI should behave. You could fit a working app in fewer lines.', type: 'roast' });
  } else if (a.lineCount < 15) {
    roasts.push({ cat: 'Verbosity', text: '<strong>' + a.lineCount + ' lines?</strong> That\'s not a CLAUDE.md, that\'s a sticky note. Your AI is basically improvising.', type: 'roast' });
  } else if (a.lineCount < 40) {
    roasts.push({ cat: 'Verbosity', text: 'Clean and lean at ' + a.lineCount + ' lines. Either you know exactly what you want, or you haven\'t discovered what can go wrong yet.', type: 'roast' });
  }

  // Strictness roasts
  if (a.nevers > 10) {
    roasts.push({ cat: 'Trust Issues', text: '<strong>' + a.nevers + ' "NEVER"s.</strong> Who hurt you? Your AI needs a therapist, not more rules.', type: 'roast' });
  } else if (a.nevers > 5) {
    roasts.push({ cat: 'Trust Issues', text: a.nevers + ' "NEVER"s. You\'re not writing instructions, you\'re writing a restraining order.', type: 'roast' });
  }

  if (a.donts > 8) {
    roasts.push({ cat: 'Trust Issues', text: '<strong>' + a.donts + ' "DO NOT"s.</strong> At this point, your AI knows more about what NOT to do than what to actually do.', type: 'roast' });
  }

  if (a.always > 8) {
    roasts.push({ cat: 'Control', text: a.always + ' "ALWAYS" directives. Absolute rules are comfortable until one of them contradicts another.', type: 'roast' });
  }

  if (a.strictTotal > 30) {
    roasts.push({ cat: 'Helicopter Parent', text: '<strong>' + a.strictTotal + ' strict directives</strong> (NEVER/DO NOT/ALWAYS/MUST/IMPORTANT/CRITICAL). Your AI has less freedom than a minimum-security prisoner.', type: 'roast' });
  } else if (a.strictTotal === 0) {
    roasts.push({ cat: 'Vibes Only', text: 'Zero strict directives. No NEVER, no ALWAYS, no MUST. Either you\'re incredibly trusting or incredibly brave.', type: 'roast' });
  }

  // Contradiction check
  if (a.saysConcise && a.isVerbose) {
    roasts.push({ cat: 'Contradiction', text: 'You tell your AI to "<strong>be concise</strong>" in a ' + a.wordCount + '-word document. The irony is *chef\'s kiss*.', type: 'roast' });
  }

  // Hook addiction
  if (a.hookMentions > 10) {
    roasts.push({ cat: 'Hook Addiction', text: '<strong>' + a.hookMentions + ' hook references.</strong> Your AI is more hooks than code at this point. It\'s a safety net made entirely of safety nets.', type: 'roast' });
  } else if (a.hookMentions > 5) {
    roasts.push({ cat: 'Hooks', text: a.hookMentions + ' hook mentions. You\'ve graduated from "using hooks" to "being a hook enthusiast." There\'s no going back.', type: 'roast' });
  }

  // MCP
  if (a.mcpMentions > 5) {
    roasts.push({ cat: 'MCP Flex', text: a.mcpMentions + ' MCP references. You\'re not configuring an AI, you\'re building a space station.', type: 'roast' });
  }

  // Headers
  if (a.headers > 15) {
    roasts.push({ cat: 'Organization', text: '<strong>' + a.headers + ' section headers.</strong> Your CLAUDE.md has more chapters than a self-help book. The table of contents needs its own table of contents.', type: 'roast' });
  }

  // Emoji
  if (a.emojis > 10) {
    roasts.push({ cat: 'Aesthetic', text: a.emojis + ' emojis in your instructions. Are you configuring an AI or decorating a Notion page?', type: 'roast' });
  }

  // TODOs
  if (a.todos > 0) {
    roasts.push({ cat: 'Unfinished Business', text: a.todos + ' TODO/FIXME/HACK found. Even your instruction file has tech debt.', type: 'roast' });
  }

  // Missing basics roasts
  if (!a.hasGitSafety) {
    roasts.push({ cat: 'Missing Basics', text: 'No git safety rules detected. <strong>Living dangerously.</strong> One `rm -rf` away from a learning experience.', type: 'roast' });
  }

  if (a.testMentions === 0 && a.wordCount > 50) {
    roasts.push({ cat: 'Missing Basics', text: 'Zero mentions of testing. Your AI ships code like it\'s 2005 and unit tests are just a suggestion.', type: 'roast' });
  }

  if (a.securityMentions === 0 && a.wordCount > 50) {
    roasts.push({ cat: 'Missing Basics', text: 'No security rules. Your .env file is probably committed and your API keys are doing a victory lap on GitHub.', type: 'roast' });
  }

  // Compliments
  if (a.hasGitSafety) {
    roasts.push({ cat: 'Respect', text: 'You have git safety rules. <strong>This is genuinely good.</strong> Your repos will thank you.', type: 'compliment' });
  }

  if (a.testMentions > 3) {
    roasts.push({ cat: 'Respect', text: 'Heavy emphasis on testing. <strong>Your future self will be grateful.</strong> This is the mark of someone who\'s been burned before.', type: 'compliment' });
  }

  if (a.securityMentions > 3) {
    roasts.push({ cat: 'Respect', text: 'Solid security awareness. <strong>Not everyone thinks about this.</strong> Your AI won\'t accidentally commit secrets.', type: 'compliment' });
  }

  if (a.codeBlocks > 2) {
    roasts.push({ cat: 'Respect', text: 'You include code examples in your instructions. <strong>Show, don\'t tell.</strong> This actually works better than prose.', type: 'compliment' });
  }

  if (a.headers >= 3 && a.headers <= 10 && a.lineCount >= 30 && a.lineCount <= 150) {
    roasts.push({ cat: 'Respect', text: 'Well-structured with a sensible number of sections. <strong>This is the Goldilocks zone</strong> of CLAUDE.md length.', type: 'compliment' });
  }

  if (a.strictTotal >= 3 && a.strictTotal <= 12) {
    roasts.push({ cat: 'Respect', text: 'Healthy number of guardrails without going overboard. <strong>You know your boundaries</strong> without being paranoid.', type: 'compliment' });
  }

  return roasts;
}

// Verdict types
const VERDICTS = [
  { id: 'micromanager', icon: '\uD83D\uDD75\uFE0F', title: 'S-Tier Micromanager', subtitle: 'Your AI has less autonomy than a vending machine', check: a => a.strictTotal > 25 && a.lineCount > 200 },
  { id: 'helicopter', icon: '\uD83E\uDE82', title: 'Helicopter Operator', subtitle: 'Hovering, but with good intentions', check: a => a.strictTotal > 15 },
  { id: 'novelist', icon: '\uD83D\uDCDA', title: 'The Novelist', subtitle: 'You didn\'t write instructions, you wrote a memoir', check: a => a.lineCount > 500 },
  { id: 'paranoid', icon: '\uD83D\uDD12', title: 'Security Paranoid', subtitle: 'Fort Knox called. They want their policies back.', check: a => a.securityMentions > 5 && a.hasGitSafety },
  { id: 'engineer', icon: '\u2699\uFE0F', title: 'Overengineered Perfection', subtitle: 'Your CLAUDE.md has better architecture than most apps', check: a => complexityScore(a) > 70 && a.lineCount > 100 },
  { id: 'vibes', icon: '\u270C\uFE0F', title: 'Vibes Only', subtitle: 'Instructions? More like suggestions.', check: a => a.strictTotal < 3 && a.lineCount < 50 },
  { id: 'minimalist', icon: '\uD83E\uDDD8', title: 'The Minimalist', subtitle: 'Less is more. Your AI appreciates the breathing room.', check: a => a.lineCount < 60 && a.lineCount >= 15 },
  { id: 'sticky', icon: '\uD83D\uDCDD', title: 'Sticky Note Energy', subtitle: 'This is instructions for a goldfish, not an AI', check: a => a.lineCount < 15 },
  { id: 'balanced', icon: '\u2696\uFE0F', title: 'Well-Balanced Config', subtitle: 'Structure meets trust. You might actually know what you\'re doing.', check: a => thoroughnessScore(a) > 60 && a.strictTotal <= 15 && a.lineCount >= 40 && a.lineCount <= 200 },
  { id: 'trustfund', icon: '\uD83C\uDFB0', title: 'Trust Fund AI', subtitle: 'You gave an AI $200/month and a post-it note. Bold.', check: a => a.lineCount < 30 && a.strictTotal < 2 },
  { id: 'default', icon: '\uD83D\uDD25', title: 'Standard Issue Operator', subtitle: 'Not bad, not roast-worthy, not boring. Just... fine.', check: () => true }
];

function getVerdict(a) {
  return VERDICTS.find(v => v.check(a));
}

let lastAnalysis = null;
let lastVerdict = null;

function roastIt() {
  const md = document.getElementById('claude-md').value.trim();
  if (!md) return;
  const tooShort = currentLang === 'ja' ? 'çŸ­ã™ãã¦æ¡ç‚¹ã§ããªã„ã€‚ã‚‚ã£ã¨æ›¸ã„ã¦ãã ã•ã„ã€‚' : 'That\'s too short to roast. Give me something to work with.';
  if (md.length < 10) { alert(tooShort); return; }

  const a = analyze(md);
  lastAnalysis = a;
  const verdict = getVerdict(a);
  lastVerdict = verdict;

  document.getElementById('verdict-banner').style.background = 'var(--surface)';
  renderResults(a, verdict);

  document.getElementById('input-section').style.display = 'none';
  document.getElementById('results').style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function loadDemo() {
  document.getElementById('claude-md').value = DEMO_MD;
}

function shareTwitter() {
  if (!lastVerdict || !lastAnalysis) return;
  const a = lastAnalysis;
  const vt = currentLang === 'ja' && VERDICTS_JA[lastVerdict.id] ? VERDICTS_JA[lastVerdict.id].title : lastVerdict.title;
  const vs = currentLang === 'ja' && VERDICTS_JA[lastVerdict.id] ? VERDICTS_JA[lastVerdict.id].subtitle : lastVerdict.subtitle;
  const text = currentLang === 'ja'
    ? 'CLAUDE.md ã‚’ CC Roast ã§æ¡ç‚¹ã—ã¦ã‚‚ã‚‰ã£ãŸ:\n\n' + lastVerdict.icon + ' ' + vt + '\n' + a.lineCount + 'è¡Œ Â· ' + a.strictTotal + ' strictãƒ«ãƒ¼ãƒ« Â· ' + a.headers + 'ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n\n"' + vs + '"\n\nã‚ãªãŸã‚‚æ¡ç‚¹:'
    : 'My CLAUDE.md got roasted:\n\n' + lastVerdict.icon + ' ' + vt + '\n' + a.lineCount + ' lines Â· ' + a.strictTotal + ' strict rules Â· ' + a.headers + ' sections\n\n"' + vs + '"\n\nGet roasted:';
  const url = 'https://yurukusa.github.io/cc-roast/';
  window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(text) + '&url=' + encodeURIComponent(url), '_blank');
}

function copyResult() {
  if (!lastVerdict || !lastAnalysis) return;
  const a = lastAnalysis;
  const text = 'CC Roast Result:\n' +
    lastVerdict.icon + ' ' + lastVerdict.title + '\n' +
    '"' + lastVerdict.subtitle + '"\n' +
    a.lineCount + ' lines | ' + a.strictTotal + ' strict rules | ' + a.headers + ' sections\n' +
    'Verbosity: ' + verbosityScore(a) + '/100 | Strictness: ' + strictnessScore(a) + '/100\n' +
    'https://yurukusa.github.io/cc-roast/';
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.querySelector('.share-btn.copy');
    const orig = btn.textContent;
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = orig, 1500);
  });
}

function tryAgain() {
  document.getElementById('results').style.display = 'none';
  document.getElementById('input-section').style.display = 'block';
  document.getElementById('claude-md').value = '';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// â”€â”€â”€ æ—¥æœ¬èªå¯¾å¿œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentLang = 'en';

const UI_JA = {
  tagline: 'CLAUDE.md ã‚’ã€å®¹èµ¦ãªãæ¡ç‚¹ã€‚',
  inputLabel: 'CLAUDE.md ã®å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š',
  placeholder: '# Claude Code ã®æŒ‡ç¤º\n\n## ãƒ«ãƒ¼ãƒ«\n- ã“ã‚Œã¯çµ¶å¯¾ã«ã™ã‚‹ãª\n- ã“ã‚Œã¯å¸¸ã«ã‚„ã‚Œ\n- ã“ã‚Œã¯è€ƒãˆã‚‹ãª\n...',
  roastBtn: 'æ¡ç‚¹ã‚¹ã‚¿ãƒ¼ãƒˆ',
  demoLink: 'ãƒ‡ãƒ¢ CLAUDE.md ã§è©¦ã™',
  shareText: 'å‹é”ã‚‚æ¡ç‚¹ã—ã¦ã‚‚ã‚‰ãŠã†',
  shareTwitter: 'X ã§ã‚·ã‚§ã‚¢',
  copyResult: 'ã‚³ãƒ”ãƒ¼',
  roastAgain: 'ã‚‚ã†ä¸€åº¦',
  langBtn: 'EN',
  lines: 'è¡Œ', words: 'èª', strictRules: 'Strictãƒ«ãƒ¼ãƒ«', sections: 'ã‚»ã‚¯ã‚·ãƒ§ãƒ³',
  verbosity: 'å†—é•·æ€§', strictness: 'å³æ ¼æ€§', complexity: 'è¤‡é›‘æ€§', thoroughness: 'ç¶²ç¾…æ€§',
  roastIcon: 'ğŸ”¥', complimentIcon: 'â­',
};

const UI_EN = {
  tagline: 'Your CLAUDE.md, brutally honest.',
  inputLabel: 'Paste your CLAUDE.md contents:',
  placeholder: '# My Claude Code Instructions\n\n## Rules\n- NEVER do this\n- ALWAYS do that\n- DO NOT even think about it\n...',
  roastBtn: 'Roast My Config',
  demoLink: 'Try with a demo CLAUDE.md',
  shareText: 'Dare your friends to get roasted too',
  shareTwitter: 'Share on X',
  copyResult: 'Copy Result',
  roastAgain: 'Roast Again',
  langBtn: 'æ—¥æœ¬èª',
  lines: 'Lines', words: 'Words', strictRules: 'Strict Rules', sections: 'Sections',
  verbosity: 'Verbosity', strictness: 'Strictness', complexity: 'Complexity', thoroughness: 'Thoroughness',
  roastIcon: 'ğŸ”¥', complimentIcon: 'â­',
};

const VERDICTS_JA = {
  micromanager: { title: 'Sç´šãƒã‚¤ã‚¯ãƒ­ãƒãƒã‚¸ãƒ£ãƒ¼', subtitle: 'è‡ªå‹•è²©å£²æ©Ÿã‚ˆã‚ŠAIã«è‡ªç”±ãŒãªã„' },
  helicopter:   { title: 'ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼ç®¡ç†è€…', subtitle: 'å–„æ„ã§ãƒ›ãƒãƒªãƒ³ã‚°ä¸­' },
  novelist:     { title: 'å°èª¬å®¶', subtitle: 'æŒ‡ç¤ºã‚’æ›¸ã„ãŸã‚“ã˜ã‚ƒãªãã€å›é¡§éŒ²ã‚’æ›¸ã„ãŸ' },
  paranoid:     { title: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ååŸ·è€…', subtitle: 'é‡‘åº«ã‹ã‚‰é›»è©±ãŒã‚ã£ãŸã€‚ãƒãƒªã‚·ãƒ¼ã‚’è¿”ã—ã¦ã»ã—ã„ã£ã¦' },
  engineer:     { title: 'éå‰°è¨­è¨ˆã®å®Œç’§ä¸»ç¾©è€…', subtitle: 'CLAUDE.mdã®æ–¹ãŒã»ã¨ã‚“ã©ã®ã‚¢ãƒ—ãƒªã‚ˆã‚Šã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒã—ã£ã‹ã‚Šã—ã¦ã‚‹' },
  vibes:        { title: 'ãƒãƒªã ã‘', subtitle: 'è¨­å®šï¼Ÿã‚€ã—ã‚ææ¡ˆã˜ã‚ƒãªã„ï¼Ÿ' },
  minimalist:   { title: 'ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆ', subtitle: 'å°‘ãªã„æ–¹ãŒå¤šã„ã€‚AIãŒçª®å±ˆã˜ã‚ƒãªãã¦æ„Ÿè¬ã—ã¦ã‚‹' },
  sticky:       { title: 'ä»˜ç®‹ã‚¨ãƒãƒ«ã‚®ãƒ¼', subtitle: 'ã“ã‚Œã¯é‡‘é­šã¸ã®æŒ‡ç¤ºã§ã‚ã£ã¦AIã¸ã˜ã‚ƒãªã„' },
  balanced:     { title: 'ãƒãƒ©ãƒ³ã‚¹å‹', subtitle: 'æ§‹é€ ã¨ä¿¡é ¼ã®ãƒãƒ©ãƒ³ã‚¹ã€‚ã‚ã‹ã£ã¦ã‚‹ã‹ã‚‚ã—ã‚Œãªã„' },
  trustfund:    { title: 'ä¿¡è¨—AIãƒ¦ãƒ¼ã‚¶ãƒ¼', subtitle: 'æœˆ$200ã®AIã«ä»˜ç®‹ä¸€æšæ¸¡ã—ãŸã€‚å¤§èƒ†' },
  default:      { title: 'ä¸€èˆ¬ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼', subtitle: 'æ‚ªããªã„ã€ãƒã‚¿ã«ã‚‚ãªã‚‰ãªã„ã€é€€å±ˆã§ã‚‚ãªã„ã€‚ãŸã â€¦æ™®é€š' },
};

function generateRoastsJA(a) {
  const roasts = [];
  if (a.lineCount > 800)
    roasts.push({ cat: 'å†—é•·æ€§', text: '<strong>' + a.lineCount + 'è¡Œã€‚</strong> AIã¯Hello Worldã‚’æ›¸ãå‰ã«å°èª¬ã‚’èª­ã¾ã•ã‚Œã¦ã‚‹ã€‚ã“ã‚Œã¯CLAUDE.mdã˜ã‚ƒãªãåšå£«è«–æ–‡ã€‚', type: 'roast' });
  else if (a.lineCount > 400)
    roasts.push({ cat: 'å†—é•·æ€§', text: '<strong>' + a.lineCount + 'è¡Œã€‚</strong> READMEã‚ˆã‚Šé•·ã„ã€‚ãƒ«ãƒ¼ãƒ«ã‚’èª­ã‚€ã ã‘ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒæ¶ˆãˆã‚‹ã€‚', type: 'roast' });
  else if (a.lineCount > 200)
    roasts.push({ cat: 'å†—é•·æ€§', text: a.lineCount + 'è¡Œã€‚AIã¸ã®æ„è¦‹ãŒå¤šã™ãã‚‹ã€‚ã“ã®ã‚µã‚¤ã‚ºã§ã‚¢ãƒ—ãƒªãŒ1æœ¬ä½œã‚Œã‚‹ã€‚', type: 'roast' });
  else if (a.lineCount < 15)
    roasts.push({ cat: 'å†—é•·æ€§', text: '<strong>' + a.lineCount + 'è¡Œï¼Ÿ</strong> CLAUDE.mdã˜ã‚ƒãªãä»˜ç®‹ã€‚AIã¯ã»ã¼ã‚¢ãƒ‰ãƒªãƒ–ã—ã¦ã‚‹ã€‚', type: 'roast' });
  else if (a.lineCount < 40)
    roasts.push({ cat: 'å†—é•·æ€§', text: a.lineCount + 'è¡Œã§ã‚¯ãƒªãƒ¼ãƒ³ã€‚ä½•ã‚’æ±‚ã‚ã¦ã„ã‚‹ã‹åˆ†ã‹ã£ã¦ã‚‹ã‹ã€ã¾ã ä½•ãŒèµ·ãã‚‹ã‹åˆ†ã‹ã£ã¦ãªã„ã‹ã€‚', type: 'roast' });

  if (a.nevers > 10)
    roasts.push({ cat: 'ãƒˆãƒ©ã‚¦ãƒ', text: '<strong>"NEVER"ãŒ' + a.nevers + 'å€‹ã€‚</strong> èª°ã‹ã«å‚·ã¤ã‘ã‚‰ã‚ŒãŸï¼ŸAIã¯ã‚»ãƒ©ãƒ”ãƒ¼ãŒå¿…è¦ã€ãƒ«ãƒ¼ãƒ«ã˜ã‚ƒãªãã€‚', type: 'roast' });
  else if (a.nevers > 5)
    roasts.push({ cat: 'ãƒˆãƒ©ã‚¦ãƒ', text: '"NEVER"ãŒ' + a.nevers + 'å€‹ã€‚è¨­å®šã˜ã‚ƒãªãæ¥è¿‘ç¦æ­¢å‘½ä»¤ã‚’æ›¸ã„ã¦ã‚‹ã€‚', type: 'roast' });

  if (a.donts > 8)
    roasts.push({ cat: 'ãƒˆãƒ©ã‚¦ãƒ', text: '<strong>"DO NOT"ãŒ' + a.donts + 'å€‹ã€‚</strong> ä½•ã‚’ã™ã¹ãã‹ã‚ˆã‚Šã™ã¹ãã§ãªã„ã“ã¨ã®æ–¹ã‚’å¤šãçŸ¥ã£ã¦ã‚‹AIã€‚', type: 'roast' });

  if (a.always > 8)
    roasts.push({ cat: 'ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«', text: '"ALWAYS"ãŒ' + a.always + 'å€‹ã€‚çµ¶å¯¾ãƒ«ãƒ¼ãƒ«ã¯ä¸€ã¤ãŒåˆ¥ã®ã¨çŸ›ç›¾ã™ã‚‹ã¾ã§ã¯å¿«é©ã€‚', type: 'roast' });

  if (a.strictTotal > 30)
    roasts.push({ cat: 'ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼ç®¡ç†', text: '<strong>Strictãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒ' + a.strictTotal + 'å€‹</strong>ï¼ˆNEVER/DO NOT/ALWAYS/MUSTç­‰ï¼‰ã€‚æœ€ä½è­¦å‚™ã®åˆ‘å‹™æ‰€ã‚ˆã‚Šè‡ªç”±ãŒãªã„ã€‚', type: 'roast' });
  else if (a.strictTotal === 0)
    roasts.push({ cat: 'ãƒãƒªã ã‘', text: 'Strictãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚¼ãƒ­ã€‚NEVER ã‚‚ ALWAYS ã‚‚ MUST ã‚‚ ãªã—ã€‚è¶…ä¿¡é ¼ã‹è¶…ç„¡è¬€ã‹ã€‚', type: 'roast' });

  if (a.saysConcise && a.isVerbose)
    roasts.push({ cat: 'çŸ›ç›¾', text: '"<strong>ç°¡æ½”ã«</strong>"ã¨æŒ‡ç¤ºã—ã¦ã„ã‚‹æ–‡æ›¸ãŒ' + a.wordCount + 'èªã€‚çš®è‚‰ãŒ*å®Œç’§*ã€‚', type: 'roast' });

  if (a.hookMentions > 10)
    roasts.push({ cat: 'ãƒ•ãƒƒã‚¯ä¸­æ¯’', text: '<strong>ãƒ•ãƒƒã‚¯ã®è¨€åŠãŒ' + a.hookMentions + 'å›ã€‚</strong> ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒãƒƒãƒˆãŒã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒãƒƒãƒˆã§ä½œã‚‰ã‚Œã¦ã‚‹çŠ¶æ…‹ã€‚', type: 'roast' });
  else if (a.hookMentions > 5)
    roasts.push({ cat: 'ãƒ•ãƒƒã‚¯', text: a.hookMentions + 'å›ã®ãƒ•ãƒƒã‚¯è¨€åŠã€‚ã€Œãƒ•ãƒƒã‚¯ã‚’ä½¿ã†äººã€ã‹ã‚‰ã€Œãƒ•ãƒƒã‚¯æ„›å¥½å®¶ã€ã«æ˜‡æ ¼ã€‚æˆ»ã‚Œãªã„ã€‚', type: 'roast' });

  if (a.mcpMentions > 5)
    roasts.push({ cat: 'MCPè‡ªæ…¢', text: 'MCPã®è¨€åŠãŒ' + a.mcpMentions + 'å›ã€‚AIã‚’è¨­å®šã—ã¦ã‚‹ã‚“ã˜ã‚ƒãªãå®‡å®™ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å»ºã¦ã¦ã‚‹ã€‚', type: 'roast' });

  if (a.headers > 15)
    roasts.push({ cat: 'æ§‹æˆ', text: '<strong>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒ' + a.headers + 'å€‹ã€‚</strong> ç›®æ¬¡ãŒè‡ªåˆ†ã®ç›®æ¬¡ã‚’å¿…è¦ã¨ã—ã¦ã‚‹ã€‚', type: 'roast' });

  if (a.emojis > 10)
    roasts.push({ cat: 'ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', text: a.emojis + 'å€‹ã®çµµæ–‡å­—ã€‚AIã‚’è¨­å®šã—ã¦ã‚‹ã®ï¼ŸNotionãƒšãƒ¼ã‚¸ã‚’é£¾ã£ã¦ã‚‹ã®ï¼Ÿ', type: 'roast' });

  if (a.todos > 0)
    roasts.push({ cat: 'æœªå®Œæˆ', text: 'TODO/FIXME/HACKãŒ' + a.todos + 'å€‹ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚‚æŠ€è¡“çš„è² å‚µãŒã‚ã‚‹ã€‚', type: 'roast' });

  if (!a.hasGitSafety)
    roasts.push({ cat: 'åŸºç¤ä¸è¶³', text: 'Gitã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãªã—ã€‚<strong>å±é™ºãªç”Ÿãæ–¹ã€‚</strong> `rm -rf` ä¸€ç™ºã§å­¦ç¿’ä½“é¨“ãŒå§‹ã¾ã‚‹ã€‚', type: 'roast' });

  if (a.testMentions === 0 && a.wordCount > 50)
    roasts.push({ cat: 'åŸºç¤ä¸è¶³', text: 'ãƒ†ã‚¹ãƒˆã®è¨€åŠã‚¼ãƒ­ã€‚2005å¹´ã¿ãŸã„ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚·ãƒƒãƒ—ã—ã¦ã‚‹ã€‚', type: 'roast' });

  if (a.securityMentions === 0 && a.wordCount > 50)
    roasts.push({ cat: 'åŸºç¤ä¸è¶³', text: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãªã—ã€‚.envãŒã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¦APIã‚­ãƒ¼ãŒGitHubä¸Šã§å‹åˆ©ã®ä¸€å‘¨ã—ã¦ãã†ã€‚', type: 'roast' });

  if (a.hasGitSafety)
    roasts.push({ cat: 'æ•¬æ„', text: 'Gitã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã€‚<strong>ã“ã‚Œã¯æœ¬å½“ã«è‰¯ã„ã€‚</strong> ãƒªãƒã‚¸ãƒˆãƒªã«æ„Ÿè¬ã•ã‚Œã¦ã‚‹ã€‚', type: 'compliment' });

  if (a.testMentions > 3)
    roasts.push({ cat: 'æ•¬æ„', text: 'ãƒ†ã‚¹ãƒˆã¸ã®å¼·ã„æ„è­˜ã€‚<strong>æœªæ¥ã®è‡ªåˆ†ãŒæ„Ÿè¬ã™ã‚‹ã€‚</strong> ä¸€åº¦ç—›ã„ç›®ã«é­ã£ãŸäººã®è¨¼ã€‚', type: 'compliment' });

  if (a.securityMentions > 3)
    roasts.push({ cat: 'æ•¬æ„', text: 'å …å®Ÿãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ„è­˜ã€‚<strong>èª°ã‚‚ãŒè€ƒãˆã‚‹ã‚ã‘ã˜ã‚ƒãªã„ã€‚</strong> AIãŒç§˜å¯†ã‚’èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã€‚', type: 'compliment' });

  if (a.codeBlocks > 2)
    roasts.push({ cat: 'æ•¬æ„', text: 'æŒ‡ç¤ºã«ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å…¥ã‚Œã¦ã‚‹ã€‚<strong>Show, don\'t tellã€‚</strong> æ–‡ç« ã‚ˆã‚Šå®Ÿéš›ã«åŠ¹æœãŒã‚ã‚‹ã€‚', type: 'compliment' });

  if (a.headers >= 3 && a.headers <= 10 && a.lineCount >= 30 && a.lineCount <= 150)
    roasts.push({ cat: 'æ•¬æ„', text: 'ã¡ã‚‡ã†ã©ã„ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ•°ã¨è¡Œæ•°ã€‚<strong>CLAUDE.mdã®ã‚´ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ­ãƒƒã‚¯ã‚¹ã‚¾ãƒ¼ãƒ³ã€‚</strong>', type: 'compliment' });

  if (a.strictTotal >= 3 && a.strictTotal <= 12)
    roasts.push({ cat: 'æ•¬æ„', text: 'ã‚„ã‚Šã™ããšå°‘ãªã™ããšã®ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«æ•°ã€‚<strong>è‡ªåˆ†ã®å¢ƒç•Œç·šã‚’ã‚ã‹ã£ã¦ã‚‹ã€‚</strong>', type: 'compliment' });

  return roasts;
}

function toggleLang() {
  currentLang = currentLang === 'en' ? 'ja' : 'en';
  applyLang();
  if (lastVerdict && lastAnalysis) renderResults(lastAnalysis, lastVerdict);
}

function applyLang() {
  const ui = currentLang === 'ja' ? UI_JA : UI_EN;
  document.getElementById('tagline').textContent = ui.tagline;
  document.getElementById('input-label').textContent = ui.inputLabel;
  document.getElementById('claude-md').placeholder = ui.placeholder;
  document.getElementById('roast-btn').textContent = ui.roastBtn;
  document.getElementById('demo-link').textContent = ui.demoLink;
  document.getElementById('lang-btn').textContent = ui.langBtn;
  const shareTextEl = document.getElementById('share-text');
  if (shareTextEl) shareTextEl.textContent = ui.shareText;
  const twitterBtn = document.getElementById('share-twitter-btn');
  if (twitterBtn) twitterBtn.textContent = ui.shareTwitter;
  const copyBtn = document.getElementById('copy-btn');
  if (copyBtn) copyBtn.textContent = ui.copyResult;
  const againBtn = document.getElementById('again-btn');
  if (againBtn) againBtn.textContent = ui.roastAgain;
}

function renderResults(a, verdict) {
  const ui = currentLang === 'ja' ? UI_JA : UI_EN;
  const verdictTitle = currentLang === 'ja' && VERDICTS_JA[verdict.id] ? VERDICTS_JA[verdict.id].title : verdict.title;
  const verdictSub   = currentLang === 'ja' && VERDICTS_JA[verdict.id] ? VERDICTS_JA[verdict.id].subtitle : verdict.subtitle;

  document.getElementById('verdict-icon').textContent = verdict.icon;
  document.getElementById('verdict-title').textContent = verdictTitle;
  document.getElementById('verdict-subtitle').textContent = verdictSub;

  // Quick stats
  const qs = document.getElementById('quick-stats');
  qs.innerHTML = '';
  [{v: a.lineCount, l: ui.lines}, {v: a.wordCount, l: ui.words}, {v: a.strictTotal, l: ui.strictRules}, {v: a.headers, l: ui.sections}].forEach(s => {
    const d = document.createElement('div');
    d.className = 'qs-item';
    d.innerHTML = '<div class="qs-val">' + s.v + '</div><div class="qs-lbl">' + s.l + '</div>';
    qs.appendChild(d);
  });

  // Score cards
  const vScore = verbosityScore(a);
  const sScore = strictnessScore(a);
  const cScore = complexityScore(a);
  const tScore = thoroughnessScore(a);
  const sg = document.getElementById('scores-grid');
  sg.innerHTML = '';
  [
    { icon: 'ğŸ“', label: ui.verbosity,    value: vScore, color: '#ff4500' },
    { icon: 'ğŸ”’', label: ui.strictness,  value: sScore, color: '#ff6b35' },
    { icon: 'âš™ï¸', label: ui.complexity,  value: cScore, color: '#00d4ff' },
    { icon: 'âœ…', label: ui.thoroughness, value: tScore, color: '#10b981' }
  ].forEach(s => {
    const card = document.createElement('div');
    card.className = 'score-card';
    card.innerHTML =
      '<div class="sc-icon">' + s.icon + '</div>' +
      '<div class="sc-label">' + s.label + '</div>' +
      '<div class="sc-value">' + s.value + '<span style="font-size:0.8rem;color:var(--text-faint)">/100</span></div>' +
      '<div class="sc-bar"><div class="sc-fill" style="width:' + s.value + '%;background:' + s.color + '"></div></div>';
    sg.appendChild(card);
  });

  // Roast items
  const roasts = currentLang === 'ja' ? generateRoastsJA(a) : generateRoasts(a);
  const rl = document.getElementById('roast-list');
  rl.innerHTML = '';
  roasts.forEach(r => {
    const item = document.createElement('div');
    item.className = 'roast-item' + (r.type === 'compliment' ? ' compliment' : '');
    item.innerHTML =
      '<div class="ri-category">' + (r.type === 'compliment' ? 'â­ ' : 'ğŸ”¥ ') + r.cat + '</div>' +
      '<div class="ri-text">' + r.text + '</div>';
    rl.appendChild(item);
  });
}
</script>

<div style="max-width:680px; margin:32px auto 0; padding:0 20px 40px;">
  <div style="background:#1a1a1a; border:1px solid #ff4500; border-radius:12px; padding:20px;">
    <h3 style="font-size:0.9rem; color:#888; margin-bottom:8px;">Want to fix your score?</h3>
    <p style="font-size:0.85rem; color:#555; margin-bottom:14px;"><strong style="color:#e8e8e8;">Claude Code Production Hooks</strong> â€” 10 hooks + 5 templates covering 18/20 health checks. Fix what the roast found.</p>
    <a href="https://yurukusa.gumroad.com/l/cc-codex-ops-kit" target="_blank"
       style="display:inline-block; background:#ff4500; color:#fff; padding:10px 24px; border-radius:8px; font-weight:700; text-decoration:none; font-size:0.9rem;">
      Get the Hooks Kit â€” $4.99 â†’
    </a>
  </div>
</div>

</body>
</html>
